# unimrcp_experiments

Here we have a Dockerfile to create a container with unimrcp and swig-wrapper.

You will need to have docker and jq installed:
```
apt install docker jq
```

To build the container image:
```
./build_image.sh
```

To start the container do:
```
./start_container.sh
```

The container will be started with '--network host' (and unimrcpserver.xml and unimrcpclient.xml will be configured with 'ip type="lo"') so that we can use mrcp clients running outside the container and listen to audio generated by unimrcp.

To start the unimrcp server do:
```
cd /usr/local/unimrcp/bin
./unimrcpserver
```

Then you can use https://github.com/MayamaTakeshi/mrcp_client like this:
```
node speechsynth_client.js 127.0.0.1 8060 en-US somevoice "Hello World"
```
or
```
node speechrecog_client.js 127.0.0.1 8060 en-US artifacts/hello_there.wav builtin:speech/transcribe
```

However the above will actually generate dummy results as unimrcpserver is configured to use the demo synth and demo recog.


You can also test with umc. Start it like this:
```
cd /usr/local/unimrcp/bin
./umc
```
Then execute commands like:
```
run synth
```
or
```
run recog
```


Then inside the container you can build the minimal_app (just a build smoke test) by doing:

```
takeshi@unimrcp_dev:~$ cd ~/host/unimrcp_experiments/minimal_app/
takeshi@unimrcp_dev:~/host/unimrcp_experiments/minimal_app$ 

takeshi@unimrcp_dev:~/host/unimrcp_experiments/minimal_app$ rm CMakeCache.txt CMakeFiles/ cmake_install.cmake -fr
takeshi@unimrcp_dev:~/host/unimrcp_experiments/minimal_app$ cmake -D USER=`whoami` .
-- The C compiler identification is GNU 8.3.0
-- The CXX compiler identification is GNU 8.3.0
-- Check for working C compiler: /usr/bin/cc
-- Check for working C compiler: /usr/bin/cc -- works
-- Detecting C compiler ABI info
-- Detecting C compiler ABI info - done
-- Detecting C compile features
-- Detecting C compile features - done
-- Check for working CXX compiler: /usr/bin/c++
-- Check for working CXX compiler: /usr/bin/c++ -- works
-- Detecting CXX compiler ABI info
-- Detecting CXX compiler ABI info - done
-- Detecting CXX compile features
-- Detecting CXX compile features - done
-- Configuring done
-- Generating done
-- Build files have been written to: /home/takeshi/host/unimrcp_experiments/minimal_app
takeshi@unimrcp_dev:~/host/unimrcp_experiments/minimal_app$ make
Scanning dependencies of target app
[ 50%] Building C object CMakeFiles/app.dir/main.c.o
[100%] Linking C executable app
[100%] Built target app

```

And then you can run the app by doing:
```
takeshi@unimrcp_dev:~/host/unimrcp_experiments/minimal_app$ ./app 
OK
```
